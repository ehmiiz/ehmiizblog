<!DOCTYPE html>
<html lang="en-us">

<head>
  
  <meta charset="utf-8">



<meta name="viewport" content="width=device-width, initial-scale=1.0">


  
    <meta name="description" content="Git is a powerful and popular version control system, sometimes a bit too powerful.
Depending on how your day went, you may want to restore a file from git to a previous state, either because you made an oopsie, want to undo some changes, or need to compare different versions.
Let&rsquo;s go through four common scenarios on how to do just that!
Scenario 1: Saved Locally on the Local Git Repository The simplest scenario is when you have saved your file locally on your local git repository, but have not staged or committed it yet.">
  


<meta name="color-scheme" content="light dark">







<meta name="generator" content="Hugo 0.121.2">
  <title>How to Restore a File from Git | all posts</title>
  <link rel="canonical" href="https://www.ehmiiz.se/blog/git_restore/">




  








  
    
  
  
      <link rel="stylesheet" href="/css/base.min.1acad582ac8b152661f9475cff97ae7980a4773d7013b34229d2f382e85b6cd6.min.1acad582ac8b152661f9475cff97ae7980a4773d7013b34229d2f382e85b6cd6.css" integrity="sha256-GsrVgqyLFSZh&#43;Udc/5eueYCkdz1wE7NCKdLzguhbbNY=" crossorigin="anonymous">

      <link rel="stylesheet" href="/css/syntax.min.065df42d2be658bb8e0720297aadf469355a5ffaf863b00e3cce0627dd106ca0.css" integrity="sha256-Bl30LSvmWLuOByApeq30aTVaX/r4Y7AOPM4GJ90QbKA=" crossorigin="anonymous">



</head>

<body>
  <nav class="u-background">
  <div class="u-wrapper">
    <ul class="Banner">
      <li class="Banner-item Banner-item--title">
        <h1 class="Banner-heading">
          <a class="Banner-link u-clickable" href="/">all posts</a>
        </h1>
      </li>
      
        
        
        <li class="Banner-item">
          <a class="Banner-link u-clickable" href="/home/">home</a>
        </li>
      
        
        
        <li class="Banner-item">
          <a class="Banner-link u-clickable" href="/blog/">blog</a>
        </li>
      
        
        
        <li class="Banner-item">
          <a class="Banner-link u-clickable" href="/about/">about</a>
        </li>
      
        
        
        <li class="Banner-item">
          <a class="Banner-link u-clickable" href="/software/">software</a>
        </li>
      
    </ul>
  </div>
</nav>

  <main>
    <div class="u-wrapper">
      <div class="u-padding">
        

  <article>
    <header class="Heading">
  <h2 class="Heading-title">
    <a class="Heading-link u-clickable" href="/blog/git_restore/" rel="bookmark">How to Restore a File from Git</a>
  </h2>
  
    <time datetime="2023-11-22T08:23:11&#43;01:00">November 22, 2023</time>
  
</header>
    <figure><img src="/pics/restore_git.png"/>
</figure>

<p>Git is a powerful and popular version control system, sometimes a bit too powerful.</p>
<p>Depending on how your day went, you may want to restore a file from git to a previous state, either because you made an oopsie, want to undo some changes, or need to compare different versions.</p>
<p>Let&rsquo;s go through four common scenarios on how to do just that!</p>
<h2 id="scenario-1-saved-locally-on-the-local-git-repository">
  <a class="Heading-link u-clickable" href="/blog/git_restore/#scenario-1-saved-locally-on-the-local-git-repository">Scenario 1: Saved Locally on the Local Git Repository</a>
</h2>
<p>The simplest scenario is when you have saved your file locally on your local git repository, but have not staged or committed it yet.</p>
<p>In this case, you can use the git restore command to discard the changes in your working directory and restore the file to the last committed state.</p>
<p>For example, if you want to restore a file named index.html, you can run the following command:</p>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git restore index.html</span></span></code></pre></div>
<p>This will overwrite the index.html file in your working directory with the version from the HEAD commit, which is the latest commit on your current branch.</p>
<p>You can also use a dot (.) instead of the file name to restore all the files in your working directory.</p>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git restore .</span></span></code></pre></div>
<h2 id="scenario-2-saved-locally-and-staged-locally">
  <a class="Heading-link u-clickable" href="/blog/git_restore/#scenario-2-saved-locally-and-staged-locally">Scenario 2: Saved Locally and Staged Locally</a>
</h2>
<p>The next scenario is when you have saved your file locally and staged it locally, but have not committed it yet.</p>
<p>In this case, you can use the git restore &ndash;staged command to unstage the file and remove it from the staging area.</p>
<p>For example, if you want to unstage a file named index.html, you can run the following command:</p>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git restore --staged index.html</span></span></code></pre></div>
<p>This will remove the index.html file from the staging area and leave it in your working directory with the changes intact. You can then use the git restore command as in the previous scenario to discard the changes in your working directory and restore the file to the last committed state. Alternatively, you can use this command:</p>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git restore --source<span class="o">=</span>HEAD</span></span></code></pre></div>
<p>To unstage and restore the file in one step.</p>
<p>For example, if you want to unstage and restore a file named index.html, you can run the following command:</p>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git restore --source<span class="o">=</span>HEAD index.html</span></span></code></pre></div>
<p>This will remove the index.html file from the staging area and overwrite it in your working directory with the version from the HEAD commit. You can also use a dot (.) instead of the file name to unstage and restore all the files in your staging area and working directory.</p>
<h2 id="scenario-3-saved-locally-staged-locally-and-committed">
  <a class="Heading-link u-clickable" href="/blog/git_restore/#scenario-3-saved-locally-staged-locally-and-committed">Scenario 3: Saved Locally, Staged Locally and Committed</a>
</h2>
<p>The third scenario is when you have saved your file locally, staged it locally and committed it, but have not pushed it to the remote repository yet. In this case, you can use the git reset &ndash;hard command to reset your local branch to the previous commit and discard all the changes in your staging area and working directory. For example, if you want to reset your local branch to the previous commit, you can run the following command:</p>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git reset --hard HEAD~1</span></span></code></pre></div>
<p>This will reset your local branch to the commit before the HEAD commit, which is the latest commit on your current branch.</p>
<p>This will also discard all the changes in your staging area and working directory, including the file you want to restore.</p>
<p>You can then use the git checkout command to check out the file from the previous commit and restore it to your working directory.</p>
<p>For example, if you want to check out and restore a file named index.html from the previous commit, you can run the following command:</p>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git checkout HEAD~1 index.html</span></span></code></pre></div>
<p>This will check out the index.html file from the commit before the HEAD commit and overwrite it in your working directory with the version from that commit.</p>
<p>You can also use a dot (.) here as well, to check out and restore all the files from the previous commit.</p>
<h2 id="scenario-4-saved-locally-staged-locally-committed-and-pushed-to-remote-repository">
  <a class="Heading-link u-clickable" href="/blog/git_restore/#scenario-4-saved-locally-staged-locally-committed-and-pushed-to-remote-repository">Scenario 4: Saved Locally, Staged Locally, Committed and Pushed to Remote Repository</a>
</h2>
<p>The fourth and final scenario is when you have saved your file locally, staged it locally, committed it and pushed it to the remote repository.</p>
<p>In this case, you can use the git revert command to create a new commit that reverses the changes in the previous commit and restores the file to the state before that commit.</p>
<p>For example, if you want to revert the previous commit and restore a file named index.html to the state before that commit, you can run the following command:</p>

  

<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git revert HEAD</span></span></code></pre></div>
<p>This will create a new commit that reverses the changes in the HEAD commit, which is the latest commit on your current branch.</p>
<p>This will also restore the index.html file in your working directory and staging area to the version from the commit before the HEAD commit.</p>
<p>You can then push the new commit to the remote repository to update it with the reverted changes.</p>
<p>You can also use the &ndash;no-commit option to revert the changes without creating a new commit, and then use the git restore or git checkout commands as in the previous scenarios to restore the file to the desired state.</p>
<h2 id="to-sum-it-up">
  <a class="Heading-link u-clickable" href="/blog/git_restore/#to-sum-it-up">To sum it up</a>
</h2>
<p>We&rsquo;ve demonstrated how to restore a file from git in four different scenarios, depending on how far you have progressed in the git workflow.</p>
<p>We have used the git restore, git reset, git checkout and git revert commands to discard, unstage, check out and revert changes in your files and restore them to the previous states.</p>
<p>I hope this post has been helpful and maybe even saved some headache!</p>
<p>If you have any questions or feedback, please feel free to DM me on Twitter or LinkedIn.</p>
<h3 id="happy-coding">
  <a class="Heading-link u-clickable" href="/blog/git_restore/#happy-coding">Happy coding</a>
</h3>

    

  

  





    
  

  </article>


      </div>
    </div>
  </main>
  <style>
body {
    font-size: 110%;
}
</style>

<style>
html {
    overflow-y: scroll;
}
</style>
<style>
.social-icon svg {
    width: 45px;   
    height: 45px;  
}

.social-icons-container {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
}
</style>
<div class="social-icons-container">

<a href="https://twitter.com/ehmiiz" target="_blank" rel="noopener">
    <span class="social-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 512 512"><!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg></span>
</a>


<a href="https://linkedin.com/in/emilarsson" target="_blank" rel="noopener">
    <span class="social-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 448 512"><!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg></span>
</a>


<a href="https://github.com/ehmiiz" target="_blank" rel="noopener">
    <span class="social-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 496 512"><!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
</a>
</div>

</body>

</html>
